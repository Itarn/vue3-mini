<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script type="module">
    // 标题：用不到百行代码说明 Vue3 响应式原理

    // 什么是响应式？
    // 当 b 依赖 a, a 变化时，b 也自动变化
    // 1. 确定依赖关系 2. a 变化了

    // 代码还原这个场景

    // 观察 vue3 的用法，确定 demo 代码设计
    // https://v3.cn.vuejs.org/api/computed-watch-api.html#watcheffect

    // 前置知识
    // proxy API
    // https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy

    import { reactive, watchEffect } from './vue-demo.js'
    // import hh from './node_modules/@vue/reactivity/index.js'
    // const hh = require('./node_modules/@vue/reactivity/index.js')
    // import { reactive, watchEffect } from './node_modules/@vue/reactivity/index.js'
    // console.log(hh)

    // let count = {
    //   num: 0
    // }
    let count = reactive({
      num: 0,
      // num1: 0
    })
    const logCount = () =>  {
      // watchEffect(logCount2)
      console.log('=== get logcount ===', count.num)
    }

    // const logCount2 = () => {
    //   console.log('=== get logcount2 ===', count.num)
    // }

    const addCount = () =>  {
      count.num += 1
      console.log('=== set addCount ===', count.num)
    }

    watchEffect(logCount)
    // logCount()
    addCount()
  </script>
</body>
</html>